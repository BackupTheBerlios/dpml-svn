<?xml version="1.0" encoding="UTF-8"?>
<document>

  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Magic</title>
  </properties>

  <body>
    <section name="Checkstyle Task">

    <subsection name="Overview">

      <p>
      The checkstyle task provides support for the integration of checkstyle
      code style validation and reporting into the Magic development environment.
      The task allows the selection of a style format using Transit uris and
      and postprocessing of XML based report output using Magic's Style Task.
      </p>

    </subsection>

    <subsection name="Example">

      <p>
      The following example buildfile applies checkstyle checks against the
      project src path (typically target/build/src or the aggregated set of
      target/build/src directories in the case of a module). In the case of
      module projects the source path is prepared taking into account all
      projects within the same group.  Output in generated into the target
      directory and is subsequently post processed into a checkstyle report
      directory as an html report.
      </p>

<source><![CDATA[
<project name="demo" default="demo" basedir="."
    xmlns:transit="antlib:net.dpml.transit">

  <transit:import uri="artifact:template:dpml/magic/standard"/>
  <transit:import uri="artifact:template:dpml/magic/checkstyle"/>

  <target name="demo" depends="checkstyle"/>

</project>
]]></source>

      <p>
      Output from the above project is shown below.
      </p>

<pre>init:
   [x:init] loading: artifact:plugin:dpml/magic/dpml-magic-checkstyle#SNAPSHOT

prepare:

checkstyle:
    [style] Processing D:\demo\target\checkstyle\checkstyle_errors.xml to
D:\demo\target\reports\checkstyle\checkstyle_report.html
    [style] Loading stylesheet D:\dpml\main\dpml\magic\xsls\checkstyle-frames.xsl
</pre>

    </subsection>

    <subsection name="Properties">

      <p>
      The following optional properties may be used to override default behaviour.
      </p>

      <table>
        <tr><th>Property</th><th>Default</th><th>Description</th></tr>
        <tr>
          <td>${project.checkstyle.dest}</td>
          <td>target/checkstyle</td>
          <td>The destination directory for temporary data.</td>
        </tr>
        <tr>
          <td>${project.checkstyle.format}</td>
          <td>artifact:format:dpml/magic/dpml</td>
          <td>The transit uri of the checkstyle format rules specification.</td>
        </tr>
        <tr>
          <td>${project.checkstyle.reports}</td>
          <td>target/reports/checkstyle</td>
          <td>Destination directory for html report content.</td>
        </tr>
      </table>

    </subsection>

    <subsection name="Attributes">

      <p>
      The checkstyle task is a direct extension of the standard checkstyle ant task
      with the addition of a single attribute value against which the checkstyle format
      specification may be declared as a transit artifact uri.
      </p>

      <table>
        <tr><th>Attribute</th><th>Default</th><th>Description</th></tr>
        <tr>
          <td>uri</td>
          <td>${project.checkstyle.format}</td>
          <td>A transit artifact uri referencing a checkstyle format rule sheet.</td>
        </tr>
      </table>

    </subsection>

    <subsection name="Style Notes">

      <p>
      The default formatting rules correspond to the
      <a href="/about/community/process/code.html">DPML standard code format</a>
      specification and is required for all contributions to the DPML.  Alternative
      code formats include a format approximating the Sun coding guidlines.
      </p>

    </subsection>

    </section>
  </body>

</document>

