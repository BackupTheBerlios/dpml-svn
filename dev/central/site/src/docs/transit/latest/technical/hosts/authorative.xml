<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
 Copyright 2004 Niclas Hedhman

 Licensed  under the  Apache License,  Version 2.0  (the "License");
 you may not use  this file  except in  compliance with the License.
 You may obtain a copy of the License at

   http://www.dpml.net/central/about/legal/

 Unless required by applicable law or agreed to in writing, software
 distributed  under the  License is distributed on an "AS IS" BASIS,
 WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or
 implied.

 See the License for the specific language governing permissions and
 limitations under the License.
-->

<document>
  <properties>
    <author email="niclas@hedhman.org">Niclas Hedhman</author>
    <title>DPML Transit</title>
  </properties>

  <body>

      <section name="Authorative Host">

        <p>
        The Transit system may be configured locally or remotely depending on
        the value of the "dpml.transit.authority" property.  The property
        identifies a remote or local path to the authorative configuration and
        is held within a file of the same name.
        </p>

        <p>Search sequence:</p>

        <ol>
        <li><code>${java.ext.dirs}/dpml.transit.authority</code></li>
        <li><code>${dpml.home}/transit/dpml.transit.authority</code></li>
        </ol>

        <p>
          In the "dpml.transit.authority" file, a single property
          "dpml.transit.authority" is resolved to a URL of the
          Authorative Host. If no protocol is given, it is assumed to be a
          directory in the local file system relative to
          <i>${dpml.home}/transit</i>.
        </p>

        <p>Default contents of dpml.transit.authority file:</p>

<source>
dpml.transit.authority=authority/
</source>

        <p>The default value of the above is equivalent to:</p>

<pre>
  ${dpml.home}/transit/authority/
</pre>
        <subsection name="XML based configuration" >
          <p>
            The configuration of available hosts is contained in the file:
          </p>
<pre>
  ${dpml.transit.authority}/hosts.xml
</pre>
          <p>
            The format is found in the <a href="hosts.html" >Hosts
            Configuration</a> document.
          </p>
        </subsection>
        <subsection name="Properties based configuration" >
          <p>
            Transit will also look for property based host descriptors.  If the
            value of ${dpml.transit.authority} is a file url host properties
            files will be resolved relative to the following path:
          </p>
<pre>
  ${dpml.transit.authority}/hosts/*.*
</pre>
          <p>
            All files found in the hosts/ directory will be read one by one.
            The priority property will determine in which order the hosts are
            queried for artifacts.
          </p>
          <p>
            If the location is a remote URL, it will read the file
            "index.lst" at that location. "index.lst" must contain a line
            separated list of files that can be read at the location, containing
            the resource host defintions.
          </p>
        </subsection>
    </section>
  </body>
</document>



