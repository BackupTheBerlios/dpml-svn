<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Guide</title>
  </properties>

  <body>
    <section name="DPML Setup">

      <subsection name="Single-user Unix/Linux setup">
        <p>
          If you are installing on a single user system, we recommend the following
          installation. We assume that the binary
          Transit distribution has been downloaded to the $HOME directory.
        </p>
        <source>
mkdir $HOME/.dpml
cd /$HOME/.dpml
tar xvfz $HOME/dpml-transit-nnnn.tar.gz
chown -R $USER .
        </source>
        <p>
          And enter the following into your own login script, e.g. $HOME/.bashrc.
          $HOME/.bash_profile  (system dependent).
        </p>
        <source>
DPML_HOME=$HOME/.dpml
export DPML_HOME
PATH=$PATH:$DPML_HOME/share/bin
export PATH
        </source>
      </subsection>

      <subsection name="Multi-user Unix/Linux setup">
        <p>
          If you are installing on a multi-user system it is important that the
          permissions are properly set up. We recommend that the following
          commands are executed as root. We assume that the binary Transit
          distribution has been downloaded to the /root directory, and that the
          system has a group named "users" which all users belong to.
        </p>
        <source>
mkdir /usr/share/dpml
cd /usr/share/dpml
tar xvfz /root/dpml-transit-nnnn.tar.gz
chown -R root.users cache
chmod -R g+w cache
cd cache
        </source>
        <p>
          And the following setup to be entered into the shared user login script,
          e.g. /etc/profile (system dependent).
        </p>
        <source>
DPML_HOME=/var/dpml
export DPML_HOME
PATH=$PATH:$DPML_HOME/share/bin
export PATH
        </source>
        <p>
          If you want to further strengthen the security, you should probably
          not use a shared DPML_HOME at all, and just instruct each user to
          go for a single user installation. Alternatively, can edit the
          <code>$DPML_HOME/transit/authority/cache.properties</code> file to
          the following.
        </p>
        <source>
# The location of the cache system
dpml.transit.cache.location=${user.home}/.dpml/cache

# The class that implements the cache handler
dpml.transit.cache.class=net.dpml.transit.artifact.FileCacheHandler
        </source>
        <p>
          which will ensure that each user has its own set of cached artifact
          and that the shared instance is write-protected.
        </p>
      </subsection>

    </section>
  </body>
</document>

