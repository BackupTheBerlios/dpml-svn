<?xml version="1.0"?>

<document>

  <properties>
    <author email="mcconnell@apache.org">Stephen McConnell</author>
    <title>Javadoc Tag Specification</title>
  </properties>

  <body>

    <section name="Entry Tag">

      <subsection name="Description">
<p>The entry tag declares a context entry required by a component.  The component is supplied the context entry via a context argument as part of the contextualization lifecycle stage. Context entries
may declare an object type or array of object types.  If the type is not declared java.lang.String is assumed.  Context entries may also be declared as optional and/or volatile.  The default behaviour is to assume that a context entry is required (not optional) is is non-volatile.</p>
      </subsection>

      <subsection name="Attributes">
        <table>
          <tr><th>Attribute</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>key</td><td>yes</td>
            <td>The context entry lookup key.
            </td>
          </tr>
          <tr>
            <td>alias</td><td>no</td>
            <td>Declaration of an alternative name that the component 
                 may use to lookup the entry.</td>
          </tr>
          <tr>
            <td>type</td><td>no</td>
            <td>
              The classname of the context entry that the component 
                 may cast the component to.  If not declared, java.lang.String
                 is assumed.
            </td>
          </tr>
          <tr>
            <td>volatile</td><td>no</td>
            <td>
              A value of true or false - if true a new instance of the 
                 context entry value shall be created and retured to the 
                 component per request. If false (the default) a container 
                 context implementation may safely cache context entry values.
            </td>
          </tr>
          <tr>
            <td>optional</td><td>no</td>
            <td>
              Declares the context entry as optional in which case 
                 the supply of the context entry is at the discretion 
                 of a container.
            </td>
          </tr>
        </table>
      </subsection>

      <subsection name="Example">

<source><![CDATA[
package org.apache.avalon.playground;

/**
 * Example of a component declaring a context entry dependencies.
 *
 * @metro.component version="1.0" name="demo"
 */
public class Primary implements Contextualizable
{
   /**
    * @metro.entry key="home" type="java.io.File" optional="true"
    * @metro.entry key="time" type="java.util.Date" volatile="true"
    * @metro.entry key="table" type="java.lang.Object[]"
    * @metro.entry key="urn:avalon:name" alias="block.name"
    */
    public void contextualize( Context context ) 
      throws ContextException
    {
        String name = (String) context.get( "name" );
        Object[] array = (Object[]) context.get( "table" );
        try
        {
            File home = (File) context.get( "home" );
            ...
        }
        catch( ContextException ce )
        {
            // it's optional
        }
    }
}
]]></source>

<p>Generated meta-info type descriptor:</p>

<source><![CDATA[
<type>
  <info>
    <version>1.3.0</version>
    <name>primary-component</name>
  </info>
  <context>
    <entry key="home" type="java.io.File" optional="true"/>
    <entry key="time" type="java.util.Date" volatile="true"/>
    <entry key="table" type="java.lang.Object[]"/>
    <entry key="urn:avalon:name" alias="block.name">
  </context>
</type>
]]></source>
      </subsection>
    </section>
  </body>

  <footer>
    <legal>
      Copyright (c) @year@ The Avalon Apache Project All rights reserved.
      $Revision: 1.1 $ $Date: 2004/04/14 11:47:33 $
    </legal>
  </footer>

</document>


