<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <properties>
    <author email="mcconnell@osm.net">Stephen McConnell</author>
    <title>Working with Modules</title>
  </properties>

  <body>

    <section name="Exporting Modules">

      <subsection name="Tutorial Objective">

        <p>
        In this tutorial we are demonstration how you can create a module
        artifact suitable for use by other third-parties.
        </p>

      </subsection>

      <subsection name="index.xml">

        <p>
        Our index definition remains unchanged except for the addition of 
        a type production statement declaring that the module build produces
        a module artifact (and just for fun we have requested a version alias
        to be produced at the same time).
        </p>

<pre>
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;index xmlns="link:xsd:dpml/lang/dpml-module#1.0">
  
  &lt;module name="org/acme" basedir="."&gt;
  
    <font color="darkred">&lt;types&gt;
      &lt;type id="module" version="1.0"&gt;
    &lt;/types&gt;</font>
  
    &lt;project name="widget" basedir="widget"/&gt;
  
    &lt;project name="gizmo" basedir="gizmo"&gt;
      &lt;dependencies>
        &lt;build>
          &lt;include key="widget"/&gt;
        &lt;/build&gt;
      &lt;/dependencies&gt;
    &lt;/project&gt;
    
  <font color="darkred">&lt;/module&gt;</font>

&lt;/index&gt;
</pre>

      </subsection>

      <subsection name="The Generated Module Artifact">

        <p>
        In this example we are building the module project using the 
        Depot template. As such Depot's project aware tasks are detecting 
        the type production statement associated with the module, resulting in 
        the automatic production of the external module artifact under the 
        <tt>target/deliverables/modules/acme-SNAPSHOT.module</tt> file.
        </p>

<source><![CDATA[
<?xml version="1.0" encoding="ISO-8859-1"?>
<module name="org"
    xmlns="link:xsd:dpml/lang/dpml-module#1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <module name="acme" version="SNAPSHOT">

    <types>
      <type id="module" version="1.0"/>
    </types>

    <resource name="widget" version="SNAPSHOT">
    </resource>

    <resource name="gizmo" version="SNAPSHOT">
    </resource>

  </module>

</module>
]]></source>

        <p>
        Something imprant to note is that the above listing includes our two 
        projects <tt>widget</tt> and <tt>gizmo</tt> together with the enclosing
        module.  In effect a module that declares a basedir is considered as a 
        buildable project.  Sometime it is convinient to handle application level
        packaging and installer creation concerns at the level of a module build, 
        but more interesting is the potential for exporting a module definition 
        for use by third-parties.
        </p>

      </subsection>
      
    </section>

  </body>
</document>

