<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <properties>
    <author email="mcconnell@osm.net">Stephen McConnell</author>
    <title>Working with Modules</title>
  </properties>

  <body>

    <section name="Exporting Modules">

      <subsection name="Tutorial Objective">

        <p>
        In this tutorial we are demonstration how you can create a module
        artifact suitable for use by other third-parties.
        </p>

      </subsection>

      <subsection name="index.xml">

        <p>
        Our index definition remains unchanged except for the addition of 
        a type production statement declaring that the module build produces
        a module artifact (and just for fun we have requested a version alias
        to be produced at the same time).
        </p>

<pre>
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;index xmlns="link:xsd:dpml/lang/dpml-module#1.0"&gt;

  &lt;imports&gt;
    &lt;import uri="link:module:ant"/&gt;
    &lt;import uri="link:module:dpml"/&gt;
  &lt;/imports&gt;

  &lt;module name="org/acme" basedir="."&gt;
  
    <font color="darkred">&lt;types&gt;
      &lt;type id="module" version="1.0"&gt;
    &lt;/types&gt;</font>
  
    &lt;project name="clock-api" basedir="api"&gt;
      &lt;types&gt;
        &lt;type id="jar"/&gt;
      &lt;/types&gt;
    &lt;/project&gt;
  
    &lt;project name="clock-impl" basedir="impl"&gt;
      &lt;types&gt;
        &lt;type id="jar"/&gt;
      &lt;/types&gt;
      &lt;dependencies&gt;
        &lt;runtime&gt;
          &lt;include key="clock-api"/&gt;
        &lt;/runtime&gt;
        &lt;test&gt;
          &lt;include ref="ant/ant-junit"/&gt;
          &lt;include ref="dpml/transit/dpml-transit-main"/&gt;
        &lt;/test&gt;
      &lt;/dependencies&gt;
    &lt;/project&gt;

  &lt;/module&gt;
  
&lt;/index&gt;
</pre>

      </subsection>

      <subsection name="The Generated Module Artifact">

        <p>
        In this example we are building the module project using the 
        Depot template. As such Depot's project aware tasks are detecting 
        the type production statement associated with the module, resulting in 
        the automatic production of the external module artifact under the 
        <tt>target/deliverables/modules/acme-SNAPSHOT.module</tt> file.
        </p>

<source><![CDATA[
<?xml version="1.0" encoding="ISO-8859-1"?>
]]></source>

      </subsection>
      
    </section>

  </body>
</document>

