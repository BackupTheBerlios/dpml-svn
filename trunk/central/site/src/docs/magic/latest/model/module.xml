<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Magic</title>
  </properties> 

  <body>
    <section name="Module">
      <p>
      A module is a XML file containing the declaration of a set of available
      resources.  A module is typicaly created using the Magic module task and 
      is used to publish the general availability of the resources it declares.
      The module file is normally references via an artifact uri.
      </p>

      <subsection name="Module Creation">

        <p>
        A module is created via the 'module' task included within the 
        Magic core set of tasks.
        </p>

<source><![CDATA[

  <target name="build" depends="standard.build">
    <x:module index="index.xml">
      <header>
        <svn href="svn://svn.berlios.de/dpml/trunk/main/metro"/>
        <home href="http://www.dpml.net/products/metro/"/>
      </header>
    </x:module>
  </target>

]]></source>

      </subsection>

      <subsection name="Example Module">

        <p>
        The module resource generated by the above instruction is shown below.
        </p>


<source><![CDATA[
<?xml version="1.0" encoding="ISO-8859-1"?>

<module uri="artifact:module:dpml/metro/dpml-metro#SNAPSHOT">

  <header>
    <publisher name="The Digital Product Meta Library"/>
    <home href="http://www.dpml.net/central/products/metro/"/>
    <docs href="http://www.dpml.net"/>
    <legal>
      <license href="http://www.dpml.net/central/about/legal/license.html"/>
      <notice href="http://www.dpml.net/central/about/legal/notice.html"/>
    </legal>
    <svn href="http://scm.dpml.net/repos/dpml/development/main/metro"/>
    <repository href="http://www.dpml.net"/>
  </header>

  <resources>

    <!-- imports -->

    <import uri="artifact:module:dpml/transit/dpml-transit#SNAPSHOT"/>
    <import uri="artifact:module:dpml/magic/dpml-magic#SNAPSHOT"/>

    <!-- module resources -->

    <resource key="dpml-parameters-impl">
      <info>
        <group>dpml/metro</group>
        <name>dpml-parameters-impl</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-parameters-api"/>
        <include key="dpml-configuration-api"/>
      </dependencies>
    </resource>

    <resource key="dpml-part-api">
      <info>
        <group>dpml/metro</group>
        <name>dpml-part-api</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-transit-main"/>
      </dependencies>
    </resource>

    <resource key="dpml-parameters-api">
      <info>
        <group>dpml/metro</group>
        <name>dpml-parameters-api</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
    </resource>

    <resource key="dpml-composition-control">
      <info>
        <group>dpml/metro</group>
        <name>dpml-composition-control</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-composition-model"/>
        <include key="dpml-logging-api"/>
        <include key="dpml-transit-main"/>
        <include key="dpml-activity-api"/>
        <include key="dpml-parameters-impl"/>
        <include key="dpml-configuration-impl"/>
      </dependencies>
    </resource>

    <resource key="dpml-composition-builder">
      <info>
        <group>dpml/metro</group>
        <name>dpml-composition-builder</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-magic-core"/>
        <include key="dpml-composition-control"/>
        <include key="xstream"/>
      </dependencies>
    </resource>

    <resource key="dpml-metro-central">
      <info>
        <group>dpml/metro</group>
        <name>dpml-metro-central</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-composition-control"/>
      </dependencies>
    </resource>

    <resource key="dpml-activity-api">
      <info>
        <group>dpml/metro</group>
        <name>dpml-activity-api</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
    </resource>

    <resource key="dpml-logging-api">
      <info>
        <group>dpml/metro</group>
        <name>dpml-logging-api</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
    </resource>

    <resource key="dpml-configuration-api">
      <info>
        <group>dpml/metro</group>
        <name>dpml-configuration-api</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
    </resource>

    <resource key="dpml-composition-model">
      <info>
        <group>dpml/metro</group>
        <name>dpml-composition-model</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-transit-main"/>
        <include key="dpml-part-api"/>
        <include key="dpml-parameters-api"/>
        <include key="dpml-configuration-api"/>
      </dependencies>
    </resource>

    <resource key="dpml-configuration-impl">
      <info>
        <group>dpml/metro</group>
        <name>dpml-configuration-impl</name>
        <version>SNAPSHOT</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="dpml-configuration-api"/>
        <include key="xercesImpl"/>
      </dependencies>
    </resource>

    <!-- referenced resources -->

    <resource key="xstream">
      <info>
        <group>xstream</group>
        <name>xstream</name>
        <version>1.1</version>
        <type>jar</type>
      </info>
    </resource>

    <resource key="xercesImpl">
      <info>
        <group>xerces</group>
        <name>xercesImpl</name>
        <version>2.6.2</version>
        <type>jar</type>
      </info>
      <dependencies>
        <include key="xmlParserAPIs"/>
      </dependencies>
    </resource>

    <resource key="xmlParserAPIs">
      <info>
        <group>xerces</group>
        <name>xmlParserAPIs</name>
        <version>2.6.2</version>
        <type>jar</type>
      </info>
    </resource>

  </resources>

</module>

]]></source>

      </subsection>

    </section>
  </body>
</document>

