<?xml version="1.0" encoding="UTF-8" ?>

<project name="dpml-central-site" default="install" basedir="."
    xmlns:transit="antlib:net.dpml.transit" 
    xmlns:x="plugin:dpml/magic/dpml-magic-core" >

  <transit:import uri="local:template:magic/standard"/>

  <target name="init" depends="standard.init">
    <x:filter key="dpml-magic-core" feature="uri" type="plugin" token="MAGIC-PLUGIN-URI"/>
    <x:filter key="dpml-activity-api" feature="spec" token="ACTIVITY-API-SPEC"/>
    <x:filter key="dpml-configuration-api" feature="spec" token="CONFIGURATION-API-SPEC"/>
    <x:filter key="dpml-transit-tools" feature="uri" type="jar" token="MAGIC-BOOTSTRAP-URI"/>
    <x:filter key="dpml-magic-core" feature="uri" type="plugin" token="MAGIC-PLUGIN-URI"/>
    <x:filter key="dpml-transit-main" feature="uri" type="jar" token="TRANSIT-MAIN-URI"/>
    <x:filter key="dpml-transit" feature="api" token="TRANSIT-DOCS-PATH"/>
    <x:filter key="dpml-magic" feature="api" token="MAGIC-DOCS-PATH"/>
    <x:filter key="dpml-metro" feature="api" token="METRO-JAVADOC-PATH"/>
    <x:filter key="dpml-depot" feature="api" token="DEPOT-DOCS-PATH"/>
    <filter token="CENTRAL-SITE-GLOSSARY-PATH" value="products/transit/glossary/index.html"/>
    <filter token="CENTRAL-SITE-CONCEPTS-PATH" value="products/transit/concepts/index.html"/>
    <x:filter key="dpml-transit" feature="version" token="TRANSIT-BUILD-ID"/>
    <x:filter key="dpml-magic" feature="version" token="MAGIC-BUILD-ID"/>
    <x:filter key="dpml-metro" feature="version" token="METRO-BUILD-ID"/>
    <x:filter key="dpml-depot" feature="version" token="DEPOT-BUILD-ID"/>
  </target>

  <target name="install" depends="docs"/>

  <target name="javadoc" depends="prepare"/>

  <target name="docs" depends="prepare">
    <x:property name="spec" feature="uri" type="plugin" key="dpml-magic-doc"/>
    <transit:plugin uri="${spec}">
      <task class="net.dpml.magic.doc.DocTask" name="docs"/>
    </transit:plugin>
    <docs/>
    <copy todir="${dpml.docs}">
      <fileset dir="${basedir}/target/docs"/>
    </copy>
  </target>

</project>

