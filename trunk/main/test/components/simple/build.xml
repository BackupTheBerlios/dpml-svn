<?xml version="1.0" encoding="UTF-8" ?>

<project name="dpml-test-simple" default="install" basedir="."
    xmlns:transit="antlib:net.dpml.transit" 
    xmlns:x="plugin:dpml/magic/dpml-magic-core"
    xmlns:c="plugin:dpml/composition/dpml-composition-builder">

  <transit:import uri="local:template:magic/standard"/>

  <target name="build" depends="standard.build">

    <!-- create the component types -->
    <c:type class="net.dpml.test.acme.ExampleComponent"/>
    <c:type class="net.dpml.test.acme.DimensionComponent"/>
    <c:type class="net.dpml.test.acme.SimpleWidget"/>
    <c:type class="net.dpml.test.acme.BadWidget" threadsafe="true"/>
    <c:type class="net.dpml.test.acme.GizmoComponent" threadsafe="true"/>
    <c:type class="net.dpml.test.acme.WidgetComponent" threadsafe="true"/>

    <c:type class="net.dpml.test.acme.ExampleContainer" name="example">
      <parts>
        <component name="dimension" type="net.dpml.test.acme.DimensionComponent"/>
      </parts>
    </c:type>

    <c:type class="net.dpml.test.acme.AcmeContainer" threadsafe="true" name="container">
      <parts>
        <component key="widget" name="widget-a" type="net.dpml.test.acme.WidgetComponent">
          <context>
            <entry key="workingDirectory">
              <param class="java.io.File" value="urn:system:work.dir"/>
              <param value="acme/workspace"/>
            </entry>
            <entry key="name" feature="name"/>
            <entry key="uri" feature="uri"/>
          </context>
        </component>
        <component key="gizmo" name="gizmo-a" type="net.dpml.test.acme.GizmoComponent">
          <context>
            <entry key="color" value="red"/>
            <entry key="widget" uri="service:net.dpml.test.acme.Widget"/>
          </context>
        </component>
      </parts>
    </c:type>

    <!-- creation of a component for reference by uri -->
    <c:component type="net.dpml.test.acme.DimensionComponent" name="dimension"/>

  </target>

</project>
