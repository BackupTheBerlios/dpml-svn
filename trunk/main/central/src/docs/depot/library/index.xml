<?xml version="1.0" encoding="UTF-8"?>

<document>

  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Build System</title>
  </properties> 

  <body>

    <section name="Project Library">

      <p>
      The DPML build system maintains information about projects, 
      resources, and modules in a central library.  The library
      is described using XML and is used to automate the determination
      of project BUILD, TEST and RUNTIME dependencies, project build
      prerequisites and processing requirements and associated 
      properties.
      </p>

      <subsection name="library.xml">

        <p>
        The library file is maintained in a file named <tt>library.xml</tt>. 
        The file is located by searching up the directory hierachy from the 
        current working directory to the root of the file system until the
        library source is located.  
        </p>

        <p>
        A library source file contains the declaration of project modules. 
        In turn, modules contain declarations of available resources (such
        as dependent jar files), projects, and subsidiary modules.
        </p>
        
      </subsection>
      
      <subsection name="XML Nested elements">
      
         <table>
           <tr>
             <td>properties</td>
             <td>0..1</td>
             <td>An set of global <a href="properties/index.html">property</a> declarations.</td>
           </tr>
           <tr>
             <td>processors</td>
             <td>0..1</td>
             <td>An set of <a href="processors/index.html">processor</a> declarations.</td>
           </tr>
           <tr>
             <td>imports</td>
             <td>0..1</td>
             <td>An set of <a href="imports/index.html">imported</a> module defintions.</td>
           </tr>
           <tr>
             <td>modules</td>
             <td>0..1</td>
             <td>An set of top-level <a href="modules/index.html">module</a> declarations.</td>
           </tr> 
         </table>

      </subsection>

    </section>

    <section name="Example">

<source><![CDATA[
<?xml version="1.0" encoding="ISO-8859-1"?>

<library>

  <properties>
    <property name="project.builder.uri" value="link:plugin:dpml/tools/dpml-tools-ant"/>
  </properties>

  <processors>
    <processor name="jar"/>
    <processor name="plugin" depends="jar"/>
    <processor name="module"/>
  </processors>

  <imports>
    <import uri="link:module:junit"/>
    <import uri="link:module:ant"/>
    <import uri="link:module:jgoodies"/>
  </imports>

  <modules>

    <module name="dpml" basedir=".">

      <types>
        <type id="module" alias="true"/>
      </types>

      <properties>
        <property name="project.publisher.name" value="Digital Product Meta Library"/>
        <property name="project.specification.vendor" value="${project.publisher.name}"/>
        <property name="project.implementation.vendor" value="${project.publisher.name}"/>
        <property name="project.implementation.vendor-id" value="net.dpml"/>
        <property name="project.publisher.url" value="http://www.dpml.net"/>
        <property name="project.resource.host" value="http://repository.dpml.net"/>
        <property name="project.api.host" value="http://api.dpml.net"/>
        <property name="project.svn.host" value="svn://svn.berlios.de/dpml/trunk/main"/>
      </properties>

      <module base="transit"/>
      <module base="tools"/>
      <module base="metro"/>
      <module base="depot"/>
      <module base="util"/>

      <project name="central" basedir="central"/>
   
    </module>

  </modules>

</library>
]]></source>

        <p>
        The above library directive contains a collection of global properties, the
        declaration of a set of processors, and the declaration of a 
        top-level module.  Collectively this information is sufficient to execute a 
        complete preparation, compilation, packaging, testing, and installation of the 
        project and modules defined within the library.  This
        level of automation is achived through (a) support from the library for 
        project relationship information, dependencies, properties and produced type
        declarations, combined with (b) a build system implementation identified by 
        the plugin uri referenced under the <tt>project.builder.uri</tt> property.
        </p>
        
    </section>
    
  </body>

</document>

