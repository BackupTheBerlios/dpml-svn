<?xml version="1.0" encoding="UTF-8"?>

<document>

  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Depot</title>
  </properties> 

  <body>

    <section name="Listeners">

      <p>
      A <tt>&lt;listener&gt;</tt> definition allows the association of a 
      collection of properties, a codebase uri, and listener dependencies, 
      with a named type.  The <tt>type</tt> represents an artifact produced 
      as a result of applying a specialized build listener to a project with 
      the objective of building the declared type.
      </p>
      
      <p>
      The <tt>&lt;listener&gt;</tt> elements may be declared within a  
      &lt;builder&gt; configuration element.
      </p>
      
      <p>
      The default location of the builder configuration is <tt>local:xml:dpml/tools/config</tt>.
      </p>

      <subsection name="XML Element">
<source><![CDATA[
<builder>
  <listener name="[type]" uri="[plugin-uri]">
    <property name="[name]" value="[value]"/>
    ..
  </listener>
  ..
</builder>
]]></source>
      </subsection>
      
      <subsection name="XML Attributes">
      
         <table>
           <tr>
             <td>name</td>
             <td>The name of the type produced by the processor (e.g. 'jar' or 'part').
                The value is required.</td>
           </tr>
           <tr>
             <td>uri</td>
             <td>A plugin codebase uri.  The value is interprited by a build system 
                 implementation. The value is required.</td>
           </tr>
           <tr>
             <td>depends</td>
             <td>A optional series of listener names (comma separated) that this listener 
               is dependent upon. The implementation ensurea that listeners 
               are synchronized with respect to dependency ordering.</td>
           </tr>
         </table>

      </subsection>
      
      <subsection name="XML Nested elements">
      
         <table>
           <tr>
             <td>property</td>
             <td>0..n</td>
             <td>
               A <a href="../properties/index.html">property</a> associating a 
               property <tt>name</tt> and <tt>value</tt> with 
               the listener definition.</td>
           </tr>
         </table>

      </subsection>

    </section>

    <section name="Example">

      <p><i>Example listener declaration.</i></p>

<source><![CDATA[
<?xml version="1.0" encoding="ISO-8859-1"?>

<builder>

  <listeners>
    <listener name="part" uri="link:plugin:dpml/metro/dpml-metro-tools"/>
  </listeners>

  ...

</builder>
]]></source>

        <p>
        The following example associates the codebase uri 
        <tt>link:plugin:dpml/metro/dpml-metro-tools</tt> with the <tt>part</tt> 
        type.  If a project declares that it produces a type 'part' it is the 
        reponsibility of a build system implementation to handle the production
        concern.
        </p>
        
    </section>

  </body>

</document>


