<?xml version="1.0" encoding="UTF-8" ?>

<!--
Default configuration for Depot-on-Ant.
Status: work-in-progress
-->

<configuration>

  <!-- products -->
  
  <dir name="src.main" path="${project.src.main.dir}">
    <description title="Project main source directory.">
    Project source for primary content to be added to the 
    normalized ${target.build.main.dir} directory.
    </description>
  </dir>
  
  <dir name="etc.main" path="${project.etc.main.dir}">
    <description title="Project supplimentary main content directory.">
    Project source for supplimentary content to be added to the 
    normalized ${target.build.main.dir} directory.
    </description>
  </dir>
  
  
  <dir name="target.dir" path="${project.basedir}/target"/>
  <dir name="target.test.dir" path="${target.dir}/test"/>
  <dir name="target.reports.dir" path="${target.dir}/reports"/>
  <dir name="target.reports.test.dir" path="${target.reports.dir}/test"/>
  
  <dir name="target.build.dir" path="${target.dir}/build"/>
  <dir name="target.build.main.dir" path="${target.build.dir}/main"/>
  <dir name="target.build.test.dir" path="${target.build.dir}/test"/>
  
  <dir name="target.classes.dir" path="${target.dir}/classes"/>
  <dir name="target.classes.main.dir" path="${target.classes.dir}/main"/>
  <dir name="target.classes.test.dir" path="${target.classes.dir}/test"/>
  
  <file id="target.deliverables.jar" type="jar"/>
  <file id="target.deliverables.part" type="part"/>
  
  <!-- processes -->
  
  <process name="prepare-main" class="net.dpml.tools.process.PrepareMainProcess">
    <consumes>
      <input id="etc.main" policy="optional"/>
      <input id="src.main" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.build.main.dir"/>
    </produces>
  </process>
  
  <process name="prepare-test" class="net.dpml.tools.process.PrepareTestProcess">
    <consumes policy="conditional">
      <input id="etc.test" policy="optional"/>
      <input id="src.test" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.build.test.dir"/>
      <output id="target.test.dir"/>
    </produces>
  </process>
  
  <process name="compile-main" class="net.dpml.tools.process.CompileMainProcess">
    <consumes>
      <input id="target.build.main.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.classes.main.dir"/>
    </produces>
  </process>
  
  <process name="compile-test" class="net.dpml.tools.process.CompileTestProcess">
    <consumes>
      <input id="target.build.test.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.classes.test.dir"/>
    </produces>
  </process>
  
  <process name="junit" class="net.dpml.tools.process.JunitProcess">
    <consumes>
      <input id="target.test.dir" policy="optional"/>
      <input id="target.classes.test.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.reports.test.dir"/>
    </produces>
  </process>
  
  <process name="jar" class="net.dpml.tools.process.JarProcess">
    <consumes>
      <input id="target.reports.test.dir"/>
      <input id="target.build.main.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.deliverables.jar">
    </produces>
  </process>
  
  <process name="rmic" class="net.dpml.tools.process.RMICProcess">
    <consumes>
      <input id="target.classes.main.dir" policy="conditional"/>
    </consumes>
  </process>
  
  <process name="part" class="net.dpml.tools.process.PartProcess">
    <consumes>
      <dir id="target.classes.main.dir" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.deliverables.part">
    </produces>
  </process>

</configuration>

