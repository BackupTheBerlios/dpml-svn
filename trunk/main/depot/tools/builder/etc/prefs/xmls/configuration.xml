<?xml version="1.0" encoding="UTF-8" ?>

<!--
Default configuration for Depot-on-Ant.
Status: work-in-progress
-->

<configuration>

  <!-- products -->
  
  <dir id="etc.main" path="${project.etc.main.dir}"/>
  <dir id="src.main" path="${project.src.main.dir}"/>
  
  <dir id="target.dir" path="${project.basedir}/target"/>
  <dir id="target.test.dir" path="${target.dir}/test"/>
  <dir id="target.reports.dir" path="${target.dir}/reports"/>
  <dir id="target.reports.test.dir" path="${target.reports.dir}/test"/>
  
  <dir id="target.build.dir" path="${target.dir}/build"/>
  <dir id="target.build.main.dir" path="${target.build.dir}/main"/>
  <dir id="target.build.test.dir" path="${target.build.dir}/test"/>
  
  <dir id="target.classes.dir" path="${target.dir}/classes"/>
  <dir id="target.classes.main.dir" path="${target.classes.dir}/main"/>
  <dir id="target.classes.test.dir" path="${target.classes.dir}/test"/>
  
  <file id="target.deliverables.jar" type="jar"/>
  <file id="target.deliverables.part" type="part"/>
  
  <!-- processes -->
  
  <process id="prepare-main" class="net.dpml.tools.process.PrepareMain">
    <consumes>
      <input id="etc.main" policy="optional"/>
      <input id="src.main" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.build.main.dir"/>
    </produces>
  </process>

  <process id="prepare-test" class="net.dpml.tools.process.PrepareTest">
    <consumes policy="conditional">
      <input id="etc.test" policy="optional"/>
      <input id="src.test" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.build.test.dir"/>
      <output id="target.test.dir"/>
    </produces>
  </process>

  <process id="compile-main" class="net.dpml.tools.process.CompileMain">
    <consumes>
      <input id="target.build.main.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.classes.main.dir"/>
    </produces>
  </process>
  
  <process id="compile-test" class="net.dpml.tools.process.CompileTest">
    <consumes>
      <input id="target.build.test.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.classes.test.dir"/>
    </produces>
  </process>
  
  <process id="junit" class="net.dpml.tools.process.ProcessJunit">
    <consumes>
      <input id="target.test.dir" policy="optional"/>
      <input id="target.classes.test.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.reports.test.dir"/>
    </produces>
  </process>
  
  <process id="jar" class="net.dpml.tools.process.ProcessJar">
    <consumes>
      <input id="target.reports.test.dir"/>
      <input id="target.build.main.dir" policy="conditional"/>
    </consumes>
    <produces>
      <output id="target.deliverables.jar">
    </produces>
  </process>
  
  <process id="rmic" class="net.dpml.tools.process.ProcessRMIC">
    <consumes>
      <input id="target.classes.main.dir" policy="conditional"/>
    </consumes>
  </process>
  
  <process id="part" class="net.dpml.tools.process.ProcessPart">
    <consumes>
      <input id="target.classes.main.dir" policy="optional"/>
    </consumes>
    <produces>
      <output id="target.deliverables.part">
    </produces>
  </process>

</configuration>

