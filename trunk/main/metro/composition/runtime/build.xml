<?xml version="1.0" encoding="UTF-8" ?>

<project name="dpml-composition-runtime" default="install" basedir="."
    xmlns:transit="antlib:net.dpml.transit" xmlns:x="plugin:dpml/magic/dpml-magic-core" >

  <transit:import uri="local:template:magic/standard"/>

  <target name="init" depends="standard.init">
    <x:property key="dpml-composition-builder" feature="uri" type="plugin" name="builder.plugin"/>
    <x:property feature="uri" type="plugin" name="control.plugin"/>
    <filter token="PART-BUILDER-URI" value="${builder.plugin}"/>
    <filter token="PART-HANDLER-URI" value="${control.plugin}"/>
    <filter token="PART-CONTROLLER-URI" value="${control.plugin}"/>
    <x:property key="dpml-composition-editor" feature="uri" type="plugin" name="editor.plugin"/>
    <filter token="PART-EDITOR-FACTORY-URI" value="${editor.plugin}"/>
  </target>

  <target name="build" depends="standard.build">
    <x:path id="build.path"/>
    <rmic base="${basedir}/target/classes" classpathref="build.path">
      <include name="**/CompositionHandler.class"/>
      <include name="**/ComponentHandler.class"/>
      <include name="**/ValueHandler.class"/>
      <include name="**/DefaultComponentModel.class"/>
      <include name="**/DefaultContextModel.class"/>
    </rmic>
  </target>

  <target name="package" depends="standard.package">
    <x:export class="net.dpml.composition.control.CompositionController"/>
  </target>

</project>
