<?xml version="1.0" encoding="ISO-8859-1"?>
<module name="metro"
    xmlns="artifact:xsd:dpml/lang/dpml-module#1.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:part="artifact:xsd:dpml/lang/dpml-part#1.0">

  <project name="dpml-state-api" basedir="state/api">
    <types>
      <type id="jar"/>
    </types>
  </project>
   
  <project name="dpml-state-impl" basedir="state/impl">
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <runtime>
        <include key="dpml-state-api" tag="public"/>
        <include ref="dpml/transit/dpml-transit-main"/>
      </runtime>
      <test>
        <include ref="ant/ant-junit"/>
      </test>
    </dependencies>
    <data>
      <filters>
        <feature token="STATE-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-state"/>
      </filters>
      <rmic>
        <include name="**/DefaultStateListener.class"/>
      </rmic>
    </data>
  </project>

  <project name="dpml-job-api" basedir="job/api">
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <test>
        <include ref="ant/ant-junit"/>
      </test>
    </dependencies>
  </project>

  <project name="dpml-job-impl" basedir="job/impl">
    <properties>
      <property name="project.test.fork" value="true"/>
    </properties>
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <runtime>
        <include ref="dpml/metro/dpml-job-api"/>
      </runtime>
      <test>
        <include ref="dpml/transit/dpml-transit-main"/>
        <include ref="ant/ant-junit"/>
      </test>
    </dependencies>
  </project>

  <project name="dpml-metro-component" basedir="component">
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <runtime>
        <include key="dpml-state-api" tag="public"/>
        <include ref="dpml/metro/dpml-job-api" tag="public"/>
        <include ref="dpml/transit/dpml-transit-main" tag="private"/>
      </runtime>
      <test>
        <include ref="ant/ant-junit"/>
      </test>
    </dependencies>
    <data>
      <filters>
        <feature token="NAME" id="name"/>
        <feature token="VERSION" id="version"/>
        <feature token="GROUP" id="group"/>
        <feature token="PART-HANDLER-URI" id="uri" type="part" ref="dpml/metro/dpml-metro-runtime"/>
      </filters>
    </data>
  </project>
  
  <project name="dpml-metro-model" basedir="model">
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <runtime>
        <include key="dpml-state-api"/>
        <include key="dpml-metro-component"/>
      </runtime>
      <test>
        <include ref="ant/ant-junit"/>
        <include key="dpml-state-impl"/>
      </test>
    </dependencies>
    <data>
      <filters>
        <feature token="NAME" id="name"/>
        <feature token="VERSION" id="version"/>
        <feature token="GROUP" id="group"/>
        <feature token="PART-HANDLER-URI" id="uri" ref="dpml/metro/dpml-metro-runtime" type="part"/>
      </filters>
    </data>
  </project>
   
  <project name="dpml-metro-runtime" basedir="runtime">
    <info>
      <description title="Metro Container Runtime">
      DPML Component management platform runtime container.
      </description>
    </info>
    <types>
      <type id="jar"/>
      <part:plugin alias="true" class="net.dpml.metro.runtime.CompositionController">
        <part:param class="net.dpml.component.InitialContext"/>
      </part:plugin>
    </types>
    <dependencies>
      <runtime>
        <include ref="dpml/util/dpml-logging-api" tag="public"/>
        <include ref="dpml/metro/dpml-metro-component" tag="protected"/>
        <include ref="dpml/metro/dpml-metro-model" tag="protected"/>
        <include ref="dpml/metro/dpml-job-impl"/>
        <include ref="dpml/metro/dpml-state-impl"/>
      </runtime>
      <test>
        <include ref="ant/ant-junit"/>
      </test>
    </dependencies>
    <data>
      <filters>
        <feature token="PART-HANDLER-URI" id="uri" type="part"/>
        <feature token="STATE-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-state"/>
        <feature token="PART-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-part"/>
        <feature token="TYPE-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-type"/>
        <feature token="COMPONENT-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-component"/>
      </filters>
      <rmic>
        <include name="**/DefaultComponentModel.class"/>
        <include name="**/DefaultContextModel.class"/>
        <include name="**/DefaultComponentHandler.class"/>
        <include name="**/DefaultProvider.class"/>
        <include name="**/DefaultComponentHandler.class"/>
        <include name="**/CompositionHandler.class"/>
        <include name="**/ValueHandler.class"/>
      </rmic>
    </data>
  </project>
  
  <project name="dpml-metro-tools" basedir="tools">
    <info>
      <description title="DPML Metro Tools">
      DPML extensions supporting the Ant build system for component 
      type and deployment data management
      </description>
    </info>
    <types>
      <type id="jar"/>
      <part:resource alias="true" urn="dpml:metro"
        path="net/dpml/metro/tools/antlib.xml"/>
    </types>
    <dependencies>
      <runtime>
        <include ref="dpml/depot/dpml-tools-builder"/>
        <include ref="dpml/transit/dpml-transit-tools"/>
        <include ref="dpml/metro/dpml-metro-runtime"/>
      </runtime>
    </dependencies>
    <data>
      <filters>
        <feature token="PART-BUILDER-URI" id="uri" type="part"/>
        <feature token="PART-HANDLER-URI" id="uri" type="part" ref="dpml/metro/dpml-metro-runtime"/>
        <feature token="COMPONENT-XSD-URI" id="uri" type="xsd" ref="dpml/lang/dpml-component"/>
        <feature token="STRATEGY-BUILDER-URI" id="uri" type="part" ref="dpml/metro/dpml-metro-runtime"/>
      </filters>
    </data>
  </project>

  <project name="dpml-metro-test" basedir="test">
    <properties>
      <property name="project.test.fork" value="true"/>
      <property name="project.javadoc.exclude" value="true"/>
    </properties>
    <types>
      <type id="jar"/>
    </types>
    <dependencies>
      <runtime>
        <include ref="dpml/util/dpml-logging-api"/>
        <include ref="dpml/metro/dpml-metro-model"/>
      </runtime>
      <test>
        <include key="dpml-metro-tools"/>
      </test>
    </dependencies>
    <data>
      <rmic>
        <include name="**/ManagedComponent#DefaultMonitor.class"/>
      </rmic>
    </data>
  </project>
  
</module>
