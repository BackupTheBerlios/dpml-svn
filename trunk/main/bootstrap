#!/bin/sh
#
# The following command will initate a bootstrap build.
#
# $ bootstrap
#

executeAnt()
{
    STATUS=99
    while [ "$STATUS" -eq 99 ] ; do
      ant -Ddpml.signature=BOOTSTRAP "$@"
      STATUS="$?"
    done
    if [ "$STATUS" == 0 ] ; then
        echo ""
    else
        exit 1
    fi
}

#xmlSetup()
#{
#    ant -f bootstrap.xml xml
#}

depotLibrary()
{
    cd depot/library
    executeAnt -f bootstrap.xml clean install
    cd ../..
}

dpmlPart()
{
    cd metro/part
    executeAnt -f bootstrap.xml clean install
    cd ../..
}

dpmlTransit()
{
    cd transit/core
    executeAnt -f bootstrap.xml clean install
    cd ../..
}

utilCli()
{
    cd util/cli
    executeAnt -f bootstrap.xml clean install
    cd ../..
}

depotBuild()
{
    cd depot/build
    executeAnt -f bootstrap.xml clean install
    cd ../..
}

depotTools()
{
    cd depot/tools
    executeAnt -f bootstrap.xml clean install
    cd ../..
}


externalModules()
{
    cd external
    build clean install
    cd ..
}


dpmlTransit
dpmlPart
depotLibrary
utilCli
depotBuild
depotTools
externalModules

echo BOOTSTRAP SUCCESSFUL
