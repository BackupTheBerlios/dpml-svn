<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <properties>
    <author email="mcconnell@dpml.net">Stephen McConnell</author>
    <title>DPML Magic</title>
  </properties> 

  <body>

    <section name="Index File">

      <p>
      The core of the Magic system is an index of projects.  The index contains 
      the declaration of development <a href="project/index.html">projects</a>, external 
      <a href="resource/index.html">resources</a> and optionally associates
      projects with a <a href="module.html">module</a>.  Each <code>
      &lt;project&gt;</code> declared within an index declares the basedir for 
      that project which is used by Magic to locate projects when executing 
      reactive builds.
      </p>

      <subsection name="Tutorials">

        <table>
          <tr>
            <td><img src="/images/info.gif"/></td>
            <td><i>The <a href="http://www.osm.net/training/tooling/example.html">
               OSM Development Tooling Getting Started Tutorial</a> covers the 
               creation of a new index.</i>
            </td>
          </tr>
        </table>

      </subsection>

      <subsection name="Concepts">

        <p>
        A project index is located by search up the directory hierarchy for a file 
        named index.xml.  This allows for the centralization of project information
        at levels appropriate to the scale of projects you are dealing with.
        </p>

        <table>
          <tr>
            <td>Index</td>
            <td>An index contains the declaration of imported modules together with 
                the declaration of buildable <a href="project/index.html">
                <code>&lt;project&gt;</code></a> entries.</td>
          </tr>
          <tr>
            <td><a href="resource/index.html">Resource</a></td>
            <td>The declaration of an available resource that may be referenced
                by a project as a dependency.</td>
          </tr>
          <tr>
            <td><a href="project/index.html">Project</a></td>
            <td>The declaration of a buildable project including the assignment 
                of a project group, name, the types of artifacts produced by 
                the project, and dependencies that the project has on other 
                projects and resources.</td>
          </tr>
          <tr>
            <td><a href="module.html">Module</a></td>
            <td>A collection of external <a href="resource/index.html">
                <code>&lt;resource&gt;</code></a> definitions that can 
                imported into another index.</td>
          </tr>
        </table>

      </subsection>

    </section>

    <section name="Index">

      <subsection name="Index Attributes">

        <table>
          <tr>
            <td>key</td>
            <td>optional</td>
            <td>
              Optional attribute that if present identifies the project 
              definition within the index that is used to construct a 
              module resource.  If a project exists the project group and version 
              will serve as the default group and version.
              <source>&lt;index key="my-module"&gt;</source>
            </td>
          </tr>
        </table>

      </subsection>

      <subsection name="Nested Elements">

        <table>
          <tr>
            <td><a href="import.html">import</a></td>
            <td>0..n</td>
            <td>Imports an external index or module into the index.</td>
          </tr>
          <tr>
            <td><a href="resource/index.html">resource</a></td>
            <td>0..n</td>
            <td>The declaration of an available resource that may be referenced
                by a project as a dependency.</td>
          </tr>
          <tr>
            <td><a href="project/index.html">project</a></td>
            <td>0..n</td>
            <td>The declaration of a buildable project including the assignment 
                of a project group, name, the types of artifacts produced by 
                the project, and dependencies that the project has on other 
                projects and resources.</td>
          </tr>
        </table>

      </subsection>

      <subsection name="Example">

<source>
&lt;index&gt;

  &lt;import uri="${dpml.module}"&gt;

  &lt;project basedir="site"&gt;
    &lt;info&gt;
      &lt;group&gt;osm/home&lt;/group&gt;
      &lt;name&gt;osm-home-site&lt;/name&gt;
      &lt;types&gt;
        &lt;type name="doc"/&gt;
      &lt;/types&gt;
    &lt;/info&gt;
    &lt;dependencies&gt;
      &lt;include key="osm-home-theme"/&gt;
    &lt;/dependencies&gt;
    &lt;plugins&gt;
      &lt;include key="dpml-magic-publish" /&gt;
    &lt;/plugins&gt;
  &lt;/project&gt;

  &lt;project basedir="theme"&gt;
    &lt;info>
      &lt;group&gt;osm/home&lt;/group&gt;
      &lt;name>osm-home-theme&lt;/name&gt;
    &lt;/info&gt;
  &lt;/project&gt;

&lt;/index&gt;
</source>

      </subsection>

    </section>

  </body>

</document>

